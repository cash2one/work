full source code: https://github.com/BlzFans/Torque3D